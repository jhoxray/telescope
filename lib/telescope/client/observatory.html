<template name="logs_bootstrap">
  <div id="id_logs_bootstrap" class="observatory_panel height50">
  <ul class="nav nav-tabs" id="lb_main_tab">
        <li><a href="#id_logs_tab" id="id_logs_tab_btn">Logs</a></li>
        <li><a href="#id_templates_tab" id="id_templates_tab_btn">Templates&amp;Events</a></li>
        <li><a href="#id_app_tab" id="id_app_tab_btn">Application Internals</a></li>
        <li><a href="#id_help_tab" id="id_help_tab_btn">Help</a></li>
      </ul>

<!-- help tab -->
      <div id="id_help_tab" class="tab-pane" style="height:100%;">
        <div style="overflow:scroll; height:80%">
        <p>For details, please see <a href="https://github.com/jhoxray/observatory">Observatory web page</a>. This is version 0.1.5.
        This package provides
                powerful logging, inspection and monitoring for your <a href="http://meteor.com">Meteor framework</a> applications. 
                Observatory panel is controlled by pressing the "O!" button in the bottom-left corner of the page: you can have it small, medium,
                large or completely turned off. By moving between tabs you can analyze logs (updated live), your application's templates with
                events, as well as monitor other internals (currently, Session state, more to come). Everything is scrollable, logs are
                sortable (just click on the column name).</p>
                <p>
                  We love to hear your feedback: please submit your ideas, questions, suggestions on Github as issues as we want
                  to take this project where you need.
                </p>
                <h5>Logging in a nutshell:</h5>
                <p>
                  Simply call <code>TL = TLog.getLogger(TLog.LOGLEVEL_MAX,true)</code> once in your app's common
                code (that gets executed on both client and server) and then call the following obvious methods:
                <code>TL.fatal("..."), error, warn, info, verbose</code>. Your logs will be updated automatically in the "Log" tab.
                </p>
              </div>
      </div>

      <!-- templates & events tab -->
      <div id="id_templates_tab" class="tab-pane" style="height: 100%;" >
        
        <!-- template -->
      <div style="overflow:scroll; height:80%" id="id_templates_div">
        <table class="table table-condensed">
          <thead>
          <tr class="no_border">
            <th class="no_border"><a href="#">Templates</a></th>
            <th class="no_border"><a href="#">Events</a></th>
          </tr>
          </thead>
          <tbody>
            {{#each templates}}
            <tr>
              <td>{{this}}</td>
              <td>
                {{#each template_events this}}
                  <a href="#" class="lb_template_events_list" templateName="{{../this}}" eventName="{{this.name}}">{{this.name}}</a><br/>
                {{/each}}
              </td>
            </tr>  
            {{/each}}
          </tbody>
          </table>
        </div>

        <div class="lb_console" style="overflow:scroll; height:80%">
          <pre id="lb_code_console">
          &nbsp;
          </pre>
        </div>

      </div>

<!-- application internals tab -->
      <div id="id_app_tab" class="tab-pane" style="height: 100%;" >
        
          <!-- session -->
      <div style="overflow:scroll; height:80%" id="id_session_div">
        <table class="table table-condensed">
          <thead>
          <tr>
            
            <th colspan="2"><a href="#">Session</a></th>
          </tr>
          </thead>
          <tbody>
            {{#each session_keys}}
            <tr class="no_border">
              <td class="no_border lb_yellow">{{key}}:</td><td class="no_border">{{value}}</td>
            </tr>  
            {{/each}}
          </tbody>
          </table>
        </div>

      </div>

<!-- logs tab tab -->
      <div class="tab-pane" id="id_logs_tab" style="height: 100%;" >
      <table class="table table-condensed">
        <thead>
          <tr class="lb_header">
            <th id="lbh_timestamp" class="lb_timestamp"><a href="#">timestamp</a></th>
            <th id="lbh_source" class="lb_server"><a href="#">source</a></th>
            <th id="lbh_severity" class="lb_loglevel"><a href="#">severity</a></th>
            <th><a href="#">message</a></th>
          </tr>
        </thead>
      </table>
      <div style="overflow:scroll; height:80%">
        <table class="table table-condensed">
          <tbody>
            {{#each log_messages}}
            <tr class="{{lb_loglevel_row_decoration}} no_border">
              <td class="lb_timestamp">{{format_timestamp timestamp}}</td>
              {{#if isServer}}
              <td class="lb_server"><span class="label label-inverse">SERVER</span></td>
              {{else}}
              <td class="lb_client"><span class="label">CLIENT</span></td>
              {{/if}}
              <td class="lb_loglevel"><span class="label {{lb_loglevel_decoration}}">{{loglevel_names loglevel}}</span></td>
              <td class="lb_message {{lb_loglevel_msg_decoration}}">{{message}}</td>
              {{/each}}
            </tbody>
          </table>
        </div>


      </div>
    </div>
    <a class="observatory_trigger" href="#" id="btn_toggle_logs">O!</a>
  </template>


  <template name="logs_simple">
    {{#each log_messages}}
    {{full_message}}<br/>
    {{/each}}
  </template>



        <!--

          <tr>
              <td>{{timestamp_text}}</td>
              {{#if isServer}}
                <td>[SERVER]</td>
              {{else}}
                <td>[CLIENT]</td>
              {{/if}}
              <td>{{loglevel}}</td>
              <td>{{message}}</td>
          </tr>
                  -->